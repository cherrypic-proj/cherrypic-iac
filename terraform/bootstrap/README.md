# ğŸ“¦ Terraform Bootstrap Module

bootstrap ëª¨ë“ˆì€ `dev` ë˜ëŠ” `prod` í™˜ê²½ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ë°˜ë“œì‹œ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ” ê¸°ë³¸ ì„¸íŒ…ì…ë‹ˆë‹¤.
- Terraform ìƒíƒœ íŒŒì¼(tfstate) ì €ì¥ì„ ìœ„í•œ S3 ë²„í‚·ê³¼ Lock ê´€ë¦¬ë¥¼ ìœ„í•œ DynamoDB í…Œì´ë¸”ì„ ìƒì„±í•˜ëŠ” ë¶€íŠ¸ìŠ¤íŠ¸ë© ëª¨ë“ˆì…ë‹ˆë‹¤.  
- CI/CD ë° í˜‘ì—… í™˜ê²½ì—ì„œ Terraform ì¶©ëŒì„ ë°©ì§€í•˜ê³  ì•ˆì „í•œ ìƒíƒœ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.

---

## ğŸ“ êµ¬ì„± ëª¨ë“ˆ

| ëª¨ë“ˆ ì´ë¦„         | ì„¤ëª… |
|------------------|------|
| `tf_state_bucket` | Terraform ìƒíƒœ íŒŒì¼ì„ ì €ì¥í•  S3 ë²„í‚· ìƒì„± |
| `tf_lock_table`   | ìƒíƒœ íŒŒì¼ ì ê¸ˆìš© DynamoDB í…Œì´ë¸” ìƒì„± |

---

## âš™ï¸ ì‚¬ìš©ë²•
> â— **ì£¼ì˜:** ì´ ê³¼ì •ì€ ci/cdì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë©° ë°˜ë“œì‹œ ìµœì´ˆ 1íšŒ ìˆ˜ë™ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- providersì—ì„œ ìê²©ì¦ëª…ì€ ìƒëµë˜ì–´ ìˆê³  ì´ëŠ” envë¥¼ í†µí•´ì„œ ì£¼ì… ë°›ìŠµë‹ˆë‹¤.
- .envíŒŒì¼ì„ ìƒì„±í•˜ê³  AWS access keyì™€ AWS secret access keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.

> ì˜ˆì‹œ)
> 
> AWS_ACCESS_KEY_ID= (access key)
> 
> AWS_SECRET_ACCESS_KEY= (secret key)
- .envrcë¥¼ ì‹¤í–‰í•˜ì—¬ env íŒŒì¼ì„ ì´ˆê¸°í™” í•´ì£¼ì„¸ìš”.
- ë‹¤ìŒìœ¼ë¡œ í™˜ê²½ì— ë§ëŠ” tfvarsë¥¼ ê¸°ì¤€ìœ¼ë¡œ terraformì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”

```bash
# example : dev í™˜ê²½ ì´ˆê¸°í™”

# ì´ˆê¸°í™”: provider ì„¤ì¹˜ ë° backend ì—°ê²°
terraform init

# ê³„íš í™•ì¸: dev í™˜ê²½ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ë³€ê²½ ë‚´ì—­ í™•ì¸
terraform plan -var-file=dev.tfvars

# ì ìš©: ë¬¸ì œê°€ ì—†ë‹¤ë©´ ì‹¤ì œ ì¸í”„ë¼ ì ìš©
terraform apply -var-file=dev.tfvars
```
- ì´í›„ì— ìƒê¸°ëŠ” `tfstate`ê³¼ ê°™ì€ íŒŒì¼ì€ ëª¨ë‘ gitignoreë˜ì–´ ìˆìœ¼ë©° ì»¤ë°‹í•˜ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤.
