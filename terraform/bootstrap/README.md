# ğŸ“¦ Terraform Bootstrap Module

bootstrap ëª¨ë“ˆì€ `dev` ë˜ëŠ” `prod` í™˜ê²½ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ë°˜ë“œì‹œ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ” ê¸°ë³¸ ì„¸íŒ…ì…ë‹ˆë‹¤.
- Terraform ìƒíƒœ íŒŒì¼(tfstate) ì €ì¥ì„ ìœ„í•œ S3 ë²„í‚·ì„ ìƒì„±í•˜ëŠ” ë¶€íŠ¸ìŠ¤íŠ¸ë© ëª¨ë“ˆì…ë‹ˆë‹¤.  
- CI/CD ë° í˜‘ì—… í™˜ê²½ì—ì„œ Terraform ì¶©ëŒì„ ë°©ì§€í•˜ê³  ì•ˆì „í•œ ìƒíƒœ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.

---

## ğŸ“ êµ¬ì„± ëª¨ë“ˆ

| ëª¨ë“ˆ ì´ë¦„         | ì„¤ëª… |
|------------------|------|
| `tf_state_bucket` | Terraform ìƒíƒœ íŒŒì¼ì„ ì €ì¥í•  S3 ë²„í‚· ìƒì„± |

---

## âš™ï¸ ì‚¬ìš©ë²•
> â— **ì£¼ì˜:** ì´ ê³¼ì •ì€ ci/cdì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë©° ë°˜ë“œì‹œ ìµœì´ˆ 1íšŒ ìˆ˜ë™ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

- í™˜ê²½.secret.tfvarsë¥¼ ë§Œë“¤ê³  ë‚´ë¶€ì— AWS ì ‘ì† ê´€ë ¨ Keyë¥¼ ë„£ì–´ì£¼ì„¸ìš” (gitignore ë©ë‹ˆë‹¤).

> ì˜ˆì‹œ) dev.secret.tfvars
> 
> access_key_id (access key)
> 
> secret_access_key= (secret key)

- ê·¸ í›„ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.

```bash
# example : dev í™˜ê²½ ì´ˆê¸°í™”

# ì´ˆê¸°í™”: provider ì„¤ì¹˜ ë° backend ì—°ê²°
terraform init

# ê³„íš í™•ì¸: dev í™˜ê²½ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ë³€ê²½ ë‚´ì—­ í™•ì¸
terraform plan \
  -var-file="dev.tfvars" \
  -var-file="dev.secret.tfvars"

# ì ìš©: ë¬¸ì œê°€ ì—†ë‹¤ë©´ ì‹¤ì œ ì¸í”„ë¼ ì ìš©
terraform apply -var-file=dev.tfvars
```
- ì´í›„ì— ìƒê¸°ëŠ” `tfstate`ê³¼ ê°™ì€ íŒŒì¼ì€ ëª¨ë‘ gitignoreë˜ì–´ ìˆìœ¼ë©° ì»¤ë°‹í•˜ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤.
